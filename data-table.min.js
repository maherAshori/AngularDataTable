/*
 DataTable v1.0.0
 dependencies: 
                AngularJS v1.2.0 >
                jquery    v2.2.4 >
*/
var dataTable = angular.module("dataTable", []); dataTable.directive("table", ["$compile", "$filter", "tableService", function (a, e, t) { return { restrict: "A", scope: { list: "=", pageSize: "=", serverSideRecords: "=", currentPage: "=", returnAction: "&" }, link: function (i, n) { function r() { var a = (new Date).getTime(), e = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var t = (a + 16 * Math.random()) % 16 | 0; return a = Math.floor(a / 16), ("x" === e ? t : 3 & t | 8).toString(16) }); return e } var o = angular.version; if (o.minor < 2 || o.dot < 0) return n.remove(), console.error("data-table not work on " + angular.version.full + " version"), console.warn("try use new version of angular 1.2.0 or uper"), !1; i.items = [], i.paging = []; var s = angular.copy(r()), d = function (a, e) { return Math.ceil(a / e) }; n.attr("id", "id_" + s), n.prepend("<thead><tr></tr></thead>"); var l = '<nav id="id_' + s + '"><ul class="pagination"><li><a class="previous" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a></li><li class="repeat"><a ng-click="goToPage(page.row);pageAction()" ng-bind="page.row"></a></li><li><a class="next" aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li></ul></nav>', c = angular.isUndefined(i.currentPage) ? 0 : i.currentPage, g = c, u = i.pageSize, f = n.find("tbody tr:first-child").data("orderby"), p = n.find("tbody tr:first-child").data("asc"), v = function (a, t, i, n, r) { angular.isUndefined(u) && (t = a.length); var o = e("orderBy")(a, n, r), s = e("startFrom")(o, i * t), d = e("limitTo")(s, t); return d }; i.$watch("list", function (a) { if (a) { var e; i.paging = [], e = angular.isUndefined(i.serverSideRecords) ? d(a.length, i.pageSize) : d(i.serverSideRecords, i.pageSize); for (var t = 0; e > t; t++) i.paging.push({ row: t + 1 }); i.items = v(a, u, c, f, p) } }, !0), i.orderTable = function (a) { var e = n.find(".binding-to-" + a).text(), t = n.find(".binding-to-" + a + " span"); n.find("thead tr th span").each(function () { var a = $(this); a.html(' <i class="fa fa-sort"></i>') }), f = e, p = !p, p ? t.html(' <i class="fa fa-sort-alpha-desc"></i>') : t.html(' <i class="fa fa-sort-alpha-asc"></i>'), i.items = v(i.list, u, c, f, p), i.pageAction() }, i.previousPage = function () { var a = c; return 0 >= a ? !1 : (c--, g = a - 1, i.items = v(i.list, u, a - 1, f, p), !1) }, i.goToPage = function (a) { g = a - 1, i.items = v(i.list, u, a - 1, f, p) }, i.nextPage = function () { var a = c, e = i.paging.length; return a >= e - 1 ? !1 : (c++, g = a + 1, i.items = v(i.list, u, a + 1, f, p), !1) }, i.pageAction = function () { var a = { orderByOn: f, orderType: p, pageSize: u, pageIndex: g }; t.setAction(a), i.returnAction() }; var x = n.find("tbody tr:first-child").attr("ng-repeat", "item in items"), h = n.find("tbody tr td").each(function (e) { var t = $(this), r = t.data("binding"), o = t.data("header"), s = t.data("sortable"); if (angular.isUndefined(r) || t.html('<span ng-bind="item.' + r + '"></span>'), n.find("thead tr:first-child").append('<th class="binding-to-' + e + '">' + o + "</th>"), s) { var d = n.find(".binding-to-" + e).attr("ng-click", "orderTable(" + e + ")"); n.find(".binding-to-" + e).append('<span><i class="fa fa-sort"></i></span>'), a(d)(i) } }); if (!angular.isUndefined(i.pageSize)) { n.after(l); var b = $("nav#id_" + s + " .previous").attr("ng-click", "previousPage()"), m = $("nav#id_" + s + " .repeat").attr("ng-repeat", "page in paging"), y = $("nav#id_" + s + " .next").attr("ng-click", "nextPage()"); a(b)(i), a(m)(i), a(y)(i) } a(x)(i), a(h)(i) } } }]), dataTable.service("tableService", function () { var a; this.setAction = function (e) { a = e }, this.getAction = function () { return a } }), dataTable.filter("startFrom", function () { return function (a, e) { return e = +e, a.slice(e) } });